{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load humanize %}

{% block title %}{{ item.name.name }} ({{ item.serial_no }}) - {% trans 'Inventory Item Detail' %}{% endblock %}
{% block content %}
<div class="pl-8 pr-8 space-y-6">
    <!-- Header -->
    <div class="bg-gray-25 pl-8 pr-8">
        <div class="flex justify-between items-center p-0">
            <div>
                <h2 class="text-md font-semibold text-gray-700">{{ item.name.name }}</h2>
                <p class="text-gray-600 mt-0.5 text-sm">{% trans "Inventory Item Detail" %} - {{ item.serial_no }}</p>
            </div>
            <div class="flex space-x-2">
                <a href="{% url 'item-master:inventory_item_list' %}" class="inline-flex items-center space-x-2
                         bg-gray-100 text-gray-700 border border-gray-200 px-3 py-1.5 rounded-md hover:bg-gray-200 text-sm">
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>{% trans "Back to Inventory" %}</span>
                </a>
                <a href="{% url 'item-master:item_master_detail' item.name.id %}" class="inline-flex items-center space-x-2
                         bg-purple-100 text-purple-700 border border-purple-200 px-3 py-1.5 rounded-md hover:bg-purple-200 text-sm">
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>{% trans "View Item Master" %}</span>
                </a>
                <a href="{% url 'item-master:item_master_update' item.name.id %}" class="inline-flex items-center space-x-2
                         bg-blue-700 text-white border border-gray-200 px-3 py-1.5 rounded-md hover:bg-blue-900 text-sm">
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15.232 5.232l3.536 3.536M9 13l6-6 3 3-6 6H9v-3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    <span>{% trans "Edit Item Master" %}</span>
                </a>
                <a href="{% url 'item-master:inventory_item_update' item.id %}" class="inline-flex items-center space-x-2
                         bg-green-700 text-white border border-gray-200 px-3 py-1.5 rounded-md hover:bg-green-900 text-sm">
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    <span>{% trans "Edit Inventory Item" %}</span>
                </a>
             
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Main Information -->
        <div class="lg:col-span-2 space-y-6">
            <!-- Inventory Item Information Card -->
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Inventory Item Information" %}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Serial Number" %}</label>
                        <p class="text-sm text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded">{{ item.serial_no }}</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Quantity" %}</label>
                        <span class="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold">
                            {{ item.quantity }}
                        </span>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Status" %}</label>
                        {% if item.in_used %}
                            <span class="inline-block bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs font-semibold">
                                <svg class="inline h-3 w-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                {% trans "In Use" %}
                            </span>
                        {% else %}
                            <span class="inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold">
                                <svg class="inline h-3 w-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                {% trans "Available" %}
                            </span>
                        {% endif %}
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Production Date" %}</label>
                        <p class="text-sm text-gray-900">
                            {% if item.production_date %}
                                {{ item.production_date|date:"F d, Y" }}
                            {% else %}
                                <span class="text-gray-400">{% trans "Not specified" %}</span>
                            {% endif %}
                        </p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Created By" %}</label>
                        <p class="text-sm text-gray-900">
                            {% if item.created_by %}
                                {{ item.created_by.get_full_name|default:item.created_by.username }}
                            {% else %}
                                <span class="text-gray-400">{% trans "System" %}</span>
                            {% endif %}
                        </p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Created Date" %}</label>
                        <p class="text-sm text-gray-900">{{ item.created_at|date:"F d, Y H:i" }}</p>
                    </div>
                </div>
            </div>

            <!-- Item Master Information Card -->
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Item Master Information" %}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Shortcode" %}</label>
                        <p class="text-sm text-gray-900 font-medium">{{ item.name.shortcode }}</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Name" %}</label>
                        <p class="text-sm text-gray-900 font-medium">{{ item.name.name }}</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Category" %}</label>
                        <span class="inline-block rounded bg-gray-100 text-gray-700 px-2 py-1 text-xs">
                            {{ item.name.category.category_name|default:"-" }}
                        </span>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Brand" %}</label>
                        <span class="inline-block rounded bg-gray-50 text-gray-700 px-2 py-1 text-xs">
                            {{ item.name.brand_name.name|default:"-" }}
                        </span>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Stock Type" %}</label>
                        <span class="inline-block rounded bg-purple-100 text-purple-800 px-2 py-1 text-xs font-semibold">
                            {{ item.name.stock_type.name|default:"-" }}
                        </span>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Status" %}</label>
                        {% if item.name.status.status == "Active" %}
                            <span class="inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold">{% trans "Active" %}</span>
                        {% else %}
                            <span class="inline-block bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs font-semibold">{{ item.name.status.status }}</span>
                        {% endif %}
                    </div>
                </div>
                {% if item.name.description %}
                <div class="mt-4">
                    <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Description" %}</label>
                    <p class="text-sm text-gray-900">{{ item.name.description }}</p>
                </div>
                {% endif %}
            </div>

            <!-- Attributes -->
            {% if item.attributes.all %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Attributes" %}</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {% for attribute in item.attributes.all %}
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <div class="flex justify-between items-start">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">{{ attribute.attribute_type.name }}</label>
                                <p class="text-lg font-semibold text-gray-900">
                                    {{ attribute.value }}
                                    {% if attribute.unit %}
                                        <span class="text-sm text-gray-500 font-normal">{{ attribute.unit.symbol }}</span>
                                    {% endif %}
                                </p>
                                {% if attribute.notes %}
                                    <p class="text-xs text-gray-500 mt-1">{{ attribute.notes }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Spare Parts -->
            {% if spare_parts %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Spare Parts" %}</h3>
                <div class="overflow-hidden border border-gray-100 rounded-lg">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "Code" %}</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "Name" %}</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "Category" %}</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "Brand" %}</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            {% for spare_part in spare_parts %}
                            <tr class="hover:bg-gray-50">
                                <td class="px-3 py-2">
                                    <a href="{% url 'item-master:item_master_detail' spare_part.id %}" class="text-blue-600 hover:text-blue-800 font-medium text-xs">
                                        {{ spare_part.shortcode }}
                                    </a>
                                </td>
                                <td class="px-3 py-2 text-xs text-gray-900">{{ spare_part.name }}</td>
                                <td class="px-3 py-2">
                                    <span class="inline-block rounded bg-gray-100 text-gray-700 px-1 py-0.5 text-xs">
                                        {{ spare_part.category.category_name|default:"-" }}
                                    </span>
                                </td>
                                <td class="px-3 py-2">
                                    <span class="inline-block rounded bg-gray-50 text-gray-700 px-1 py-0.5 text-xs">
                                        {{ spare_part.brand_name.name|default:"-" }}
                                    </span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            {% endif %}

            <!-- Maintenance Schedules -->
            {% if item.name.maintenance_schedules.all %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">
                    <svg class="inline-block w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    {% trans "Maintenance Schedules" %}
                </h3>
                <div class="space-y-3">
                    {% for schedule in item.name.maintenance_schedules.all %}
                    <div class="p-4 border border-gray-200 rounded-lg hover:shadow-sm transition-shadow">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium 
                                               {% if schedule.is_critical %}bg-red-100 text-red-800{% else %}bg-green-100 text-green-800{% endif %}">
                                        {% if schedule.is_critical %}
                                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            {% trans "Critical" %}
                                        {% else %}
                                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            {% trans "Standard" %}
                                        {% endif %}
                                    </span>
                                    <span class="text-lg font-semibold text-gray-900">
                                        {{ schedule.service_period_value.service_period_type.type }}
                                    </span>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4 mb-3">
                                    <div>
                                        <label class="block text-xs font-medium text-gray-500 mb-1">{% trans "Interval" %}</label>
                                        <div class="flex items-center space-x-2">
                                            <span class="text-xl font-bold text-blue-600">
                                                {% if schedule.service_period_value.value == schedule.service_period_value.value|floatformat:0|add:0 %}
                                                    {{ schedule.service_period_value.value|floatformat:0 }}
                                                {% else %}
                                                    {{ schedule.service_period_value.value }}
                                                {% endif %}
                                            </span>
                                            <span class="text-sm text-gray-600 font-medium">
                                                {{ schedule.service_period_value.service_period_type.unit }}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-500 mb-1">{% trans "Type" %}</label>
                                        <div class="flex items-center space-x-2">
                                            {% if 'saat' in schedule.service_period_value.service_period_type.unit|lower or 'hour' in schedule.service_period_value.service_period_type.unit|lower %}
                                                <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                <span class="text-sm text-orange-700 font-medium">{% trans "Usage Based" %}</span>
                                            {% elif 'km' in schedule.service_period_value.service_period_type.unit|lower or 'kilometre' in schedule.service_period_value.service_period_type.unit|lower %}
                                                <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path d="M13 10V3L4 14h7v7l9-11h-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                <span class="text-sm text-purple-700 font-medium">{% trans "Distance Based" %}</span>
                                            {% else %}
                                                <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                <span class="text-sm text-blue-700 font-medium">{% trans "Time Based" %}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                {% if schedule.maintenance_description %}
                                <div>
                                    <label class="block text-xs font-medium text-gray-500 mb-1">{% trans "Description" %}</label>
                                    <p class="text-sm text-gray-700 bg-gray-50 p-2 rounded">{{ schedule.maintenance_description }}</p>
                                </div>
                                {% endif %}
                                
                                {% if schedule.service_period_value.description %}
                                <div class="mt-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded text-xs bg-blue-50 text-blue-700">
                                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        {{ schedule.service_period_value.description }}
                                    </span>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="mt-3 pt-3 border-t border-gray-100">
                            <div class="flex justify-between items-center text-xs text-gray-500">
                                <span>{% trans "Added" %}: {{ schedule.created_at|date:"M d, Y" }}</span>
                                {% if schedule.updated_at != schedule.created_at %}
                                    <span>{% trans "Updated" %}: {{ schedule.updated_at|date:"M d, Y" }}</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                    <div class="flex items-start space-x-2">
                        <svg class="w-5 h-5 text-blue-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <div>
                            <h4 class="text-sm font-medium text-blue-800">{% trans "Maintenance Info" %}</h4>
                            <p class="text-xs text-blue-700 mt-1">
                                {% trans "These schedules define when maintenance should be performed based on time, usage hours, or distance." %}
                                {% trans "Critical maintenances are marked with priority indicators." %}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Related Inventory Items -->
            {% if related_items %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Other Inventory Items" %}</h3>
                <div class="space-y-2">
                    {% for related_item in related_items %}
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 transition">
                        <div class="flex items-center space-x-3">
                            <code class="text-xs bg-white px-2 py-1 rounded border">{{ related_item.serial_no }}</code>
                            <div>
                                <p class="text-sm font-medium text-gray-900">{% trans "Quantity" %}: {{ related_item.quantity }}</p>
                                <p class="text-xs text-gray-500">{% trans "Created" %}: {{ related_item.created_at|date:"M d, Y" }}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            {% if related_item.in_used %}
                                <span class="inline-block bg-orange-100 text-orange-800 px-2 py-0.5 rounded text-xs font-semibold">{% trans "In Use" %}</span>
                            {% else %}
                                <span class="inline-block bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold">{% trans "Available" %}</span>
                            {% endif %}
                            <a href="{% url 'item-master:inventory_item_detail' related_item.pk %}" class="text-blue-600 hover:text-blue-800 text-xs">{% trans "View" %}</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Specifications -->
            {% if item.name.specs.all %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Specification Files" %}</h3>
                <div class="space-y-2">
                    {% for spec in item.name.specs.all %}
                    <div class="flex items-center p-3 bg-gray-50 rounded hover:bg-gray-100 transition">
                        <svg class="h-5 w-5 text-blue-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <div class="flex-1">
                            <a href="{{ spec.url.url }}" target="_blank" class="text-sm font-medium text-blue-600 hover:text-blue-800">
                                {% trans "Specification File" %} #{{ forloop.counter }}
                            </a>
                            <p class="text-xs text-gray-500">{{ spec.created_at|date:"M d, Y" }}</p>
                        </div>
                        <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
            <!-- QR Code -->
            {% if item.qr_code_image %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "QR Code" %}</h3>
                <div class="text-center">
                    <div class="inline-block bg-white p-4 rounded-lg border-2 border-gray-100">
                        <img src="{{ item.qr_code_image.url }}" alt="QR Code for {{ item.serial_no }}" class="w-32 h-32">
                    </div>
                    <p class="text-xs text-gray-500 mt-2">{% trans "QR Code for" %} {{ item.serial_no }}</p>
                    <a href="{{ item.qr_code_image.url }}" target="_blank" class="inline-block mt-2 text-blue-600 hover:text-blue-800 text-xs">
                        {% trans "Download QR Code" %}
                    </a>
                </div>
            </div>
            {% endif %}

            <!-- Images -->
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Images" %}</h3>
                {% if item.name.images.all %}
                    <div class="grid grid-cols-3 gap-1">
                        {% for image in item.name.images.all %}
                        <div class="aspect-square bg-gray-100 rounded overflow-hidden">
                            <img src="{{ image.url.url }}" alt="{{ item.name.name }}" class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity" 
                                 onclick="window.open('{{ image.url.url }}', '_blank')">
                        </div>
                        {% endfor %}
                    </div>
                    <p class="text-center text-gray-500 text-xs mt-1">{% trans "Click to view full size" %}</p>
                {% else %}
                    <div class="w-16 h-16 bg-gray-100 rounded flex items-center justify-center mx-auto">
                        <svg class="h-6 w-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <p class="text-center text-gray-500 text-xs mt-2">{% trans "No images available" %}</p>
                {% endif %}
            </div>

            <!-- Warranties -->
            {% if item.name.warranties.all %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Warranties" %}</h3>
                <div class="space-y-2">
                    {% for warranty in item.name.warranties.all %}
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                        <span class="text-sm text-gray-700">{{ warranty.warranty_type.type }}</span>
                        <span class="text-sm font-medium text-gray-900">{{ warranty.value }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Service Forms -->
            {% if item.name.service_forms.all %}
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Service Forms" %}</h3>
                <div class="space-y-2">
                    {% for service_form in item.name.service_forms.all %}
                    <div class="p-2 bg-blue-50 rounded">
                        <span class="text-sm font-medium text-blue-900">{{ service_form.name }}</span>
                        {% if service_form.description %}
                        <p class="text-xs text-blue-700 mt-1">{{ service_form.description }}</p>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Metadata -->
            <div class="bg-white rounded-xl border border-gray-200 p-6">
                <h3 class="text-md font-semibold text-gray-700 mb-4 pb-2 border-b border-gray-200">{% trans "Metadata" %}</h3>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Created" %}</label>
                        <p class="text-sm text-gray-900">{{ item.created_at|date:"F d, Y H:i" }}</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Last Updated" %}</label>
                        <p class="text-sm text-gray-900">{{ item.updated_at|date:"F d, Y H:i" }}</p>
                    </div>
                    {% if item.production_date %}
                    <div>
                        <label class="block text-sm font-medium text-gray-500 mb-1">{% trans "Production Date" %}</label>
                        <p class="text-sm text-gray-900">{{ item.production_date|date:"F d, Y" }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
