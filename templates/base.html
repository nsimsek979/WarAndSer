{% load static %}
{% load i18n %}
<html lang="tr" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <title>{% block title %}Homepage{% endblock title %}</title>
    <link rel="shortcut icon"  type="image/x-icon" href="{% static 'konnektom-logo.png' %}">

    <!-- Tailwind CSS -->
    <link href="{% static 'css/tailwind.css' %}" rel="stylesheet">
    
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">\

    <!-- Tailwind Configuration -->

    <!-- Chrome-specific optimizations -->
    <style>
        /* Chrome font rendering optimization */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Fix Chrome's default button styles */
        button, input, select, textarea {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        /* Fix Chrome's outline behavior */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Ensure consistent box-sizing */
        *, *::before, *::after {
            box-sizing: border-box;
        }
        
        /* Fix Chrome's default margins */
        body, h1, h2, h3, h4, h5, h6, p, ul, ol, li, figure, figcaption, blockquote, dl, dd {
            margin: 0;
        }
    </style>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'custom.css' %}?v=1.0">
</head>
<body class="h-full bg-gray-50 dark:bg-gray-900 ">
        <style>
            body { font-family: 'Inter', sans-serif; }
        </style>
        <div x-data="{ 
        sidebarOpen: JSON.parse(localStorage.getItem('sidebarOpen') ?? 'true'), 
        init() {
            // LocalStorage'dan sidebar durumunu oku
            const saved = localStorage.getItem('sidebarOpen');
            if (saved !== null) {
                this.sidebarOpen = JSON.parse(saved);
            } else {
                // Ilk kez açiliyorsa, responsive kontrolü
                this.sidebarOpen = window.innerWidth >= 1024;
            }
            
            // Sidebar durumu degistiginde localStorage'a kaydet
            this.$watch('sidebarOpen', value => {
                localStorage.setItem('sidebarOpen', JSON.stringify(value));
            });
            
            // Responsive kontrolü - sadece mobile'da kapanmasini sagla
            window.addEventListener('resize', () => {
                if (window.innerWidth < 640) {
                    this.sidebarOpen = false;
                    localStorage.setItem('sidebarOpen', 'false');
                }
            });
        }
    }" class="flex h-full">
        <!-- Mobile sidebar button -->
        <button 
            x-show="!sidebarOpen"
            @click="sidebarOpen = true"
            class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 fixed z-30"
        >
            <span class="sr-only">{% trans "Open sidebar" %}</span>
            <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
            </svg>
        </button>

        <!-- Sidebar -->
        {% include 'components/sidebar.html' %}

        <!-- Main Content -->
        <div class="flex-1 flex flex-col transition-all duration-300" 
             x-bind:class="sidebarOpen ? 'ml-64' : 'ml-16'"
             x-show="true">
            <!-- Modern Clean Navbar with Sticky Top -->
            <div class="sticky top-0 z-50 bg-white shadow-sm border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700">
                <div class="max-w-full mx-auto px-6 sm:px-8 lg:px-12">
                    <div class="flex items-center py-6">
                        <!-- Mobile Sidebar Toggle - Left Side -->
                        <div class="flex items-center sm:hidden">
                            <button @click="sidebarOpen = true" 
                                type="button" 
                                class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 mr-4">
                                <span class="sr-only">{% trans "Open sidebar" %}</span>
                                <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
                                </svg>
                            </button>
                            
                            <!-- Logo and Title (visible on mobile) -->
                            <a href="{% url 'dashboard:home' %}" class="flex items-center">
                                <img src="{% static 'konnektom-logo.png' %}" class="h-10 mr-3" alt="{% trans 'Company Logo' %}" />
                                <span class="text-2xl font-bold text-gray-900 dark:text-white">GVS</span>
                            </a>
                        </div>
                        
                        <!-- Centered Page Title Section for larger screens -->
                        <div class="hidden sm:flex sm:flex-1 sm:justify-center">
                            <div class="text-center">
                                <h1 class="text-2xl font-bold text-gray-900 dark:text-white">
                                    {% block page_title %}{% endblock %}
                                </h1>
                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                                    {% block page_description %}{% endblock %}
                                </p>
                            </div>
                        </div>
                        
                        <!-- Right side - can be used for future features -->
                        <div class="hidden sm:flex items-center space-x-4">
                            <!-- Space for future quick actions, breadcrumbs, etc. -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Page Content -->
            <main class="flex-1 p-8 overflow-y-auto">
                {% block content %}{% endblock content %}
            </main>
        </div>
    </div>
</body>
</html>