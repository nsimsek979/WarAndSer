<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>BakÄ±m Raporu</title>
    <style>
        body { font-family: Arial, sans-serif; font-size: 12px; color: #222; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { font-size: 24px; color: #2d3748; margin-bottom: 20px; text-align: center; }
        h2 { font-size: 18px; color: #4a5568; margin-bottom: 15px; border-bottom: 2px solid #e2e8f0; padding-bottom: 5px; }
        h3, h4 { color: #2b6cb0; margin-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #cbd5e1; padding: 8px; text-align: left; }
        th { background: #f7fafc; color: #2d3748; font-weight: bold; }
        .section { margin-bottom: 30px; padding: 15px; background: #f8fafc; border-radius: 8px; }
        .success { background: #d1fae5; color: #065f46; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; }
        .highlight { background: #fef3c7; padding: 10px; border-radius: 5px; margin-bottom: 15px; }
        .quantity-badge { background: #3b82f6; color: white; padding: 3px 8px; border-radius: 4px; font-size: 11px; }
        .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0; color: #666; font-size: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>{% if language == 'tr' %}BakÄ±m Raporu{% else %}Maintenance Report{% endif %}</h1>
        
        <div class="success">
            <strong>{% if language == 'tr' %}âœ… BakÄ±m iÅŸlemi baÅŸarÄ±yla tamamlanmÄ±ÅŸtÄ±r.{% else %}âœ… Maintenance operation completed successfully.{% endif %}</strong>
        </div>

        <div class="section">
            <h2>{% if language == 'tr' %}BakÄ±m TÃ¼rÃ¼{% else %}Maintenance Type{% endif %}</h2>
            <div class="highlight">
                {% if maintenance_record.maintenance_type == 'periodic' %}
                    <strong>âœ… {% if language == 'tr' %}Periyodik BakÄ±m YapÄ±ldÄ±{% else %}Periodic Maintenance Completed{% endif %}</strong>
                {% elif maintenance_record.maintenance_type == 'breakdown' %}
                    <strong>ðŸ”§ {% if language == 'tr' %}ArÄ±za BakÄ±mÄ± YapÄ±ldÄ±{% else %}Breakdown Maintenance Completed{% endif %}</strong>
                {% endif %}
            </div>
        </div>

        <div class="section">
            <h2>{% if language == 'tr' %}BakÄ±m Bilgileri{% else %}Maintenance Information{% endif %}</h2>
            <table>
                <tr><th>{% if language == 'tr' %}BakÄ±m Tarihi{% else %}Maintenance Date{% endif %}</th><td>{{ maintenance_record.service_date|date:"d.m.Y" }}</td></tr>
                <tr><th>{% if language == 'tr' %}Teknisyen{% else %}Technician{% endif %}</th><td>{{ maintenance_record.technician.get_full_name|default:maintenance_record.technician.username }}</td></tr>
                {% if maintenance_record.technician.company %}
                <tr><th>{% if language == 'tr' %}Servis FirmasÄ±{% else %}Service Company{% endif %}</th><td>{{ maintenance_record.technician.company.name }}</td></tr>
                {% endif %}
                {% if maintenance_record.maintenance_type == 'breakdown' and maintenance_record.breakdown_reason %}
                <tr><th>{% if language == 'tr' %}ArÄ±za Sebebi{% else %}Breakdown Reason{% endif %}</th><td>{{ maintenance_record.breakdown_reason }}</td></tr>
                {% endif %}
                {% if maintenance_record.notes %}
                <tr><th>{% if language == 'tr' %}YapÄ±lan Ä°ÅŸler{% else %}Work Performed{% endif %}</th><td>{{ maintenance_record.notes }}</td></tr>
                {% endif %}
            </table>
        </div>

        <div class="section">
            <h2>{% if language == 'tr' %}Cihaz Bilgileri{% else %}Equipment Information{% endif %}</h2>
            <table>
                <tr><th>{% if language == 'tr' %}ÃœrÃ¼n{% else %}Product{% endif %}</th><td>{{ installation.inventory_item.name.name }}</td></tr>
                {% if installation.inventory_item.name.brand_name %}
                <tr><th>{% if language == 'tr' %}Marka{% else %}Brand{% endif %}</th><td>{{ installation.inventory_item.name.brand_name }}</td></tr>
                {% endif %}
                {% if installation.inventory_item.serial_no %}
                <tr><th>{% if language == 'tr' %}Seri No{% else %}Serial No{% endif %}</th><td>{{ installation.inventory_item.serial_no }}</td></tr>
                {% endif %}
                {% if installation.inventory_item.name.category %}
                <tr><th>{% if language == 'tr' %}Kategori{% else %}Category{% endif %}</th><td>{{ installation.inventory_item.name.category.name }}</td></tr>
                {% endif %}
                <tr><th>{% if language == 'tr' %}Kurulum Tarihi{% else %}Installation Date{% endif %}</th><td>{{ installation.setup_date|date:"d.m.Y" }}</td></tr>
                {% if installation.location_address %}
                <tr><th>{% if language == 'tr' %}Adres{% else %}Address{% endif %}</th><td>{{ installation.location_address }}</td></tr>
                {% endif %}
            </table>
        </div>

        <div class="section">
            <h2>{% if language == 'tr' %}MÃ¼ÅŸteri Bilgileri{% else %}Customer Information{% endif %}</h2>
            <table>
                <tr><th>{% if language == 'tr' %}Firma AdÄ±{% else %}Company Name{% endif %}</th><td>{{ customer.name }}</td></tr>
                {% if customer.email %}
                <tr><th>{% if language == 'tr' %}E-posta{% else %}Email{% endif %}</th><td>{{ customer.email }}</td></tr>
                {% endif %}
                {% if customer.telephone %}
                <tr><th>{% if language == 'tr' %}Telefon{% else %}Phone{% endif %}</th><td>{{ customer.telephone }}</td></tr>
                {% endif %}
                {% if customer.tax_number %}
                <tr><th>{% if language == 'tr' %}Vergi No{% else %}Tax Number{% endif %}</th><td>{{ customer.tax_number }}</td></tr>
                {% endif %}
            </table>
        </div>

        {% if service_forms %}
        <div class="section">
            <h2>{% if language == 'tr' %}YapÄ±lan Servis FormlarÄ±{% else %}Completed Service Forms{% endif %}</h2>
            <table>
                <tr>
                    <th>{% if language == 'tr' %}Form AdÄ±{% else %}Form Name{% endif %}</th>
                    <th>{% if language == 'tr' %}Durum{% else %}Status{% endif %}</th>
                </tr>
                {% for service_form in service_forms %}
                <tr>
                    <td>{{ service_form.service_form.name }}</td>
                    <td>âœ… {% if language == 'tr' %}TamamlandÄ±{% else %}Completed{% endif %}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        {% endif %}

        {% if spare_parts %}
        <div class="section">
            <h2>{% if language == 'tr' %}KullanÄ±lan Yedek ParÃ§alar{% else %}Used Spare Parts{% endif %}</h2>
            <table>
                <tr>
                    <th>{% if language == 'tr' %}ParÃ§a AdÄ±{% else %}Part Name{% endif %}</th>
                    <th>{% if language == 'tr' %}Miktar{% else %}Quantity{% endif %}</th>
                    <th>{% if language == 'tr' %}AÃ§Ä±klama{% else %}Notes{% endif %}</th>
                </tr>
                {% for spare_part in spare_parts %}
                <tr>
                    <td>{{ spare_part.spare_part.name }}</td>
                    <td><span class="quantity-badge">{{ spare_part.quantity }}</span></td>
                    <td>{{ spare_part.notes|default:"-" }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        {% endif %}

        {% if maintenance_record.notes %}
        <div class="section">
            <h2>{% if language == 'tr' %}BakÄ±m NotlarÄ±{% else %}Maintenance Notes{% endif %}</h2>
            <div class="highlight">
                {{ maintenance_record.notes|linebreaks }}
            </div>
        </div>
        {% endif %}

        {% if photos %}
        <div class="section">
            <h2>{% if language == 'tr' %}BakÄ±m FotoÄŸraflarÄ±{% else %}Maintenance Photos{% endif %}</h2>
            <p>{% if language == 'tr' %}{{ photos|length }} adet fotoÄŸraf eklendi{% else %}{{ photos|length }} photos attached{% endif %}</p>
        </div>
        {% endif %}

        {% if documents %}
        <div class="section">
            <h2>{% if language == 'tr' %}BakÄ±m Belgeleri{% else %}Maintenance Documents{% endif %}</h2>
            <table>
                <tr>
                    <th>{% if language == 'tr' %}Belge AdÄ±{% else %}Document Name{% endif %}</th>
                    <th>{% if language == 'tr' %}YÃ¼kleme Tarihi{% else %}Upload Date{% endif %}</th>
                </tr>
                {% for document in documents %}
                <tr>
                    <td>{{ document.name|default:document.document.name }}</td>
                    <td>{{ document.created_at|date:"d.m.Y H:i" }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        {% endif %}

        <div class="section">
            <h2>{% if language == 'tr' %}Sonraki Ä°ÅŸlemler{% else %}Next Actions{% endif %}</h2>
            <p>{% if language == 'tr' %}
                Bu bakÄ±m raporu otomatik olarak oluÅŸturulmuÅŸtur. Herhangi bir sorunuz varsa lÃ¼tfen teknisyen ile iletiÅŸime geÃ§in.
            {% else %}
                This maintenance report has been generated automatically. If you have any questions, please contact the technician.
            {% endif %}</p>
            
            {% if maintenance_record.technician.email %}
            <p><strong>{% if language == 'tr' %}Teknisyen Ä°letiÅŸim{% else %}Technician Contact{% endif %}:</strong> {{ maintenance_record.technician.email }}</p>
            {% endif %}
        </div>

        <div class="footer">
            <p>{% if language == 'tr' %}Bu rapor {{ maintenance_record.created_at|date:"d.m.Y H:i" }} tarihinde otomatik olarak oluÅŸturulmuÅŸtur.{% else %}This report was automatically generated on {{ maintenance_record.created_at|date:"d.m.Y H:i" }}.{% endif %}</p>
        </div>
    </div>
</body>
</html>
